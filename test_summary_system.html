<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>요약 시스템 테스트 (사용자 100명)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-controls button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }
        .test-controls button:hover {
            background: #2563eb;
        }
        .test-controls button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .progress {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e5e7eb;
            border-radius: 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .test-results {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            border-bottom: 1px solid #e5e7eb;
            padding: 15px 0;
        }
        .test-case:last-child {
            border-bottom: none;
        }
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .test-id {
            font-weight: bold;
            color: #3b82f6;
        }
        .test-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-success {
            background: #d1fae5;
            color: #065f46;
        }
        .status-fail {
            background: #fee2e2;
            color: #991b1b;
        }
        .user-input {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .summaries {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .summary-box {
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        .detailed-summary {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
        }
        .compact-summary {
            background: #fef3c7;
            border: 1px solid #fde68a;
        }
        .summary-label {
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 5px;
        }
        .summary-text {
            line-height: 1.5;
        }
        .summary-meta {
            font-size: 11px;
            color: #666;
            margin-top: 5px;
        }
        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>🧪 요약 시스템 테스트 (사용자 100명 시뮬레이션)</h1>

    <div class="test-controls">
        <button id="startBtn" onclick="startTest()">테스트 시작</button>
        <button id="stopBtn" onclick="stopTest()" disabled>중지</button>
        <button onclick="clearResults()">결과 초기화</button>
    </div>

    <div class="progress">
        <div style="margin-bottom: 10px; font-weight: bold;">진행 상황</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%">0/100</div>
        </div>
    </div>

    <div class="stats">
        <div class="stat-card">
            <div class="stat-label">테스트 완료</div>
            <div class="stat-value" id="completedCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">성공</div>
            <div class="stat-value" style="color: #10b981;" id="successCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">실패</div>
            <div class="stat-value" style="color: #ef4444;" id="failCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">평균 처리 시간</div>
            <div class="stat-value" id="avgTime">0s</div>
        </div>
    </div>

    <div class="test-results" id="results">
        <h3>테스트 결과</h3>
        <div id="resultList">
            <p style="color: #666; text-align: center;">테스트를 시작하면 결과가 여기에 표시됩니다.</p>
        </div>
    </div>

    <script>
        // 테스트 데이터: 100명의 사용자 대화 시나리오
        const testData = [
            { id: 1, name: "김민수", messages: ["오늘 회사에서 프로젝트 발표했는데 정말 떨렸어", "근데 상사가 칭찬해주셔서 기분 좋았어", "저녁에는 동료들이랑 회식했어 ㅋㅋ"] },
            { id: 2, name: "이지은", messages: ["친구랑 카페 갔다가 옛날 추억 얘기 많이 했어", "고등학교 때 생각나서 웃겼어", "다음주에 또 만나기로 했어!"] },
            { id: 3, name: "박서준", messages: ["헬스장 등록했어! 운동 시작!", "근데 너무 힘들다 ㅠㅠ", "그래도 건강해지고 싶어서 계속 다녀야지"] },
            { id: 4, name: "최유나", messages: ["엄마랑 통화하면서 많이 싸웠어", "나를 이해 안 해주는 것 같아서 속상해", "시간이 좀 지나면 괜찮아질까..."] },
            { id: 5, name: "정재훈", messages: ["새로운 프로그래밍 언어 배우기 시작했어", "생각보다 어렵네 ㅋㅋ", "근데 재밌어서 계속 공부하고 있어"] },
            { id: 6, name: "강수진", messages: ["오늘 면접 봤는데 너무 긴장했어", "질문에 제대로 대답 못한 것 같아서 걱정이야", "결과는 일주일 뒤에 나온대"] },
            { id: 7, name: "윤하늘", messages: ["반려견이 아파서 병원 다녀왔어", "괜찮다고 하는데 걱정돼", "오늘은 옆에서 계속 지켜봐줘야겠어"] },
            { id: 8, name: "임도현", messages: ["드디어 책 한 권 다 읽었어!", "정말 오래 걸렸는데 뿌듯해", "다음엔 추리소설 읽어볼까 해"] },
            { id: 9, name: "송민아", messages: ["요즘 계속 야근이야... 너무 피곤해", "주말에는 집에서 푹 쉬어야겠어", "이번 프로젝트만 끝나면 괜찮을 거야"] },
            { id: 10, name: "한지우", messages: ["새로운 취미로 그림 그리기 시작했어", "처음이라 서툴지만 재밌어", "유튜브 보면서 따라 그려보고 있어"] },
            { id: 11, name: "오성민", messages: ["오늘 드라이브 다녀왔어", "날씨 좋아서 기분 전환 되더라", "다음엔 바다까지 가볼까 해"] },
            { id: 12, name: "서예린", messages: ["친구가 결혼한대! 축하해줬어", "근데 나는 언제쯤 결혼할까 ㅋㅋ", "아직은 혼자도 괜찮은데"] },
            { id: 13, name: "권태양", messages: ["게임에서 드디어 레벨업 했어!", "정말 오래 걸렸는데 성공했어", "다음 목표는 더 높은 랭크야"] },
            { id: 14, name: "장서현", messages: ["오늘 요리 처음 해봤어", "생각보다 맛있게 나왔어 ㅋㅋ", "다음엔 더 어려운 요리 도전해볼 거야"] },
            { id: 15, name: "노준혁", messages: ["이사 준비하느라 바빠", "짐 싸는 게 생각보다 힘드네", "새 집에서의 생활이 기대돼"] },
            { id: 16, name: "홍다인", messages: ["시험 공부 중인데 너무 어려워", "포기하고 싶지만 참아야지", "합격하면 진짜 기쁠 것 같아"] },
            { id: 17, name: "백승우", messages: ["축구 경기 봤는데 진짜 재밌었어!", "우리 팀이 이겨서 너무 좋아", "다음 경기도 꼭 이겼으면!"] },
            { id: 18, name: "신혜원", messages: ["오늘 미용실 갔다 왔어", "머리 스타일 바꿨는데 괜찮은 것 같아", "주변 사람들 반응이 궁금해"] },
            { id: 19, name: "문재현", messages: ["부모님께 용돈 드렸어", "기뻐하시는 모습 보니까 뿌듯해", "더 열심히 벌어야겠다고 생각했어"] },
            { id: 20, name: "조아라", messages: ["콘서트 티켓팅 성공했어!!", "진짜 너무 기뻐 ㅠㅠ", "공연 날만 기다리고 있어"] },
            { id: 21, name: "유진우", messages: ["자격증 시험 합격했어!", "정말 열심히 공부한 보람이 있어", "이제 새로운 목표를 세워야지"] },
            { id: 22, name: "배수연", messages: ["오늘 비 와서 우울했어", "집에만 있으니까 심심하더라", "내일은 날씨 좋았으면 좋겠어"] },
            { id: 23, name: "안준호", messages: ["새로운 프로젝트 맡았어", "부담되지만 할 수 있을 것 같아", "열심히 해서 성공시켜야지"] },
            { id: 24, name: "황지민", messages: ["동생이 대학 합격했대!", "정말 자랑스러워", "축하 선물 뭐 사줄까 고민 중이야"] },
            { id: 25, name: "구민재", messages: ["오늘 등산 다녀왔어", "힘들었지만 경치 보니까 힐링됐어", "다음에 또 가야겠어"] },
            { id: 26, name: "태서아", messages: ["독서 모임 시작했어", "책 읽고 토론하는 게 재밌어", "다양한 사람들 만나는 것도 좋아"] },
            { id: 27, name: "남궁준", messages: ["차 사고 났는데 다행히 큰 부상은 없어", "근데 차 수리비가 걱정이야", "앞으로 더 조심해서 운전해야겠어"] },
            { id: 28, name: "진소희", messages: ["승진 제안 받았어!", "고민 중인데 책임이 무거울 것 같아", "그래도 도전해보려고 해"] },
            { id: 29, name: "설재민", messages: ["오늘 생일이었는데 조용히 보냈어", "혼자 케이크 사 먹었어 ㅋㅋ", "평범한 하루였지만 괜찮았어"] },
            { id: 30, name: "공유진", messages: ["새로운 취미 생겼어! 사진 찍기", "일상 속 순간들 담는 게 좋아", "점점 실력이 늘고 있어"] },
            { id: 31, name: "변준서", messages: ["오늘 회사 회의에서 아이디어 제안했어", "팀장님이 좋게 봐주셨어", "다음 프로젝트에 반영될 것 같아"] },
            { id: 32, name: "표지원", messages: ["친구가 이사한대", "많이 아쉬워", "자주 연락하고 지내야겠어"] },
            { id: 33, name: "소민준", messages: ["헬스 PT 시작했어", "개인 트레이닝이라 효과 좋을 것 같아", "몸 만들기 화이팅!"] },
            { id: 34, name: "곽수아", messages: ["오늘 영화 봤는데 완전 감동이었어", "눈물 펑펑 쏟았어 ㅠㅠ", "OST도 너무 좋더라"] },
            { id: 35, name: "제갈현", messages: ["창업 준비 중이야", "불안하지만 기대돼", "열심히 해서 성공하고 싶어"] },
            { id: 36, name: "독고민", messages: ["반려묘 입양했어!", "너무 귀여워 ㅋㅋ", "집이 훨씬 따뜻해진 느낌이야"] },
            { id: 37, name: "남채원", messages: ["다이어트 시작했어", "운동이랑 식단 조절 중이야", "목표 체중까지 파이팅!"] },
            { id: 38, name: "선우진", messages: ["이직 결정했어", "새로운 환경이 걱정되지만 도전해볼 거야", "더 성장할 수 있을 것 같아"] },
            { id: 39, name: "탁하은", messages: ["오늘 친구 결혼식 다녀왔어", "정말 행복해 보이더라", "나도 언젠가 저렇게 행복할 수 있을까"] },
            { id: 40, name: "황보석", messages: ["새로운 언어 배우기 시작했어", "영어 공부하고 있어", "유튜브 강의 보면서 따라하는 중이야"] },
            { id: 41, name: "선지후", messages: ["오늘 부모님께 요리해드렸어", "맛있다고 하셔서 기뻤어", "다음에 또 해드려야지"] },
            { id: 42, name: "방예은", messages: ["코딩 테스트 합격했어!", "정말 열심히 준비한 보람이 있어", "면접 준비 이제 시작이야"] },
            { id: 43, name: "석우빈", messages: ["오늘 청소하느라 바빴어", "집이 깨끗해지니까 기분 좋아", "주말마다 청소해야겠어"] },
            { id: 44, name: "편강민", messages: ["마라톤 대회 신청했어", "완주할 수 있을까 걱정되지만 도전!", "꾸준히 연습해야겠어"] },
            { id: 45, name: "여민서", messages: ["오늘 요가 수업 들었어", "몸이 되게 개운해", "스트레스 풀리는 느낌이야"] },
            { id: 46, name: "추태희", messages: ["블로그 시작했어!", "일상 기록하는 용도로", "글쓰기 실력도 늘었으면 좋겠어"] },
            { id: 47, name: "도준영", messages: ["주식 투자 시작했어", "공부 많이 해야겠어", "조금씩 수익 나고 있어"] },
            { id: 48, name: "명수진", messages: ["오늘 친구랑 등산했어", "힘들었지만 정상 도착하니 뿌듯해", "운동도 되고 좋더라"] },
            { id: 49, name: "호진우", messages: ["새로운 악기 배우기 시작했어", "기타 배우는 중이야", "손가락 아프지만 재밌어"] },
            { id: 50, name: "갈서연", messages: ["오늘 봉사활동 다녀왔어", "보람찬 하루였어", "다음 달에도 참여할 거야"] },
            { id: 51, name: "예지훈", messages: ["졸업 논문 제출했어!", "정말 오래 걸렸는데 끝나서 후련해", "이제 졸업만 남았어"] },
            { id: 52, name: "석채린", messages: ["새로운 직장 첫 출근했어", "긴장됐지만 동료들이 친절하더라", "빨리 적응하고 싶어"] },
            { id: 53, name: "도하진", messages: ["오늘 친구 생일 파티 갔어", "오랜만에 친구들 만나서 좋았어", "다음에 우리 집에서 모이기로 했어"] },
            { id: 54, name: "란수아", messages: ["새로운 카페 발견했어", "분위기 정말 좋아", "단골 될 것 같아 ㅋㅋ"] },
            { id: 55, name: "빈민호", messages: ["오늘 중고 거래로 물건 팔았어", "생각보다 비싸게 팔렸어", "방도 정리되고 일석이조야"] },
            { id: 56, name: "뇌서윤", messages: ["반려식물 키우기 시작했어", "매일 관찰하는 재미가 있어", "쑥쑥 자라는 모습이 귀여워"] },
            { id: 57, name: "뇌준호", messages: ["오늘 드디어 운전면허 땄어!", "시험 떨어질까 걱정했는데 합격!", "이제 차 사야하나 고민 중이야"] },
            { id: 58, name: "애예진", messages: ["새로운 습관 만들기 도전 중이야", "매일 아침 일찍 일어나기", "벌써 일주일째 성공하고 있어"] },
            { id: 59, name: "판태민", messages: ["오늘 피아노 연주회 다녀왔어", "정말 감동적이었어", "나도 악기 배워볼까 싶어"] },
            { id: 60, name: "묵지아", messages: ["집 근처에 새 헬스장 생겼어", "시설 좋아서 등록했어", "내일부터 운동 시작이야"] },
            { id: 61, name: "돈현우", messages: ["오늘 가족 여행 계획 세웠어", "여름 휴가 때 제주도 가기로 했어", "벌써부터 기대돼"] },
            { id: 62, name: "증유나", messages: ["새로운 드라마 정주행 중이야", "완전 재밌어서 밤새 봤어", "내일 출근 힘들 것 같아 ㅋㅋ"] },
            { id: 63, name: "궐재훈", messages: ["오늘 헌혈하고 왔어", "좋은 일 한 것 같아 기분 좋아", "정기적으로 해야겠어"] },
            { id: 64, name: "릉수빈", messages: ["온라인 강의 수강 중이야", "새로운 지식 배우는 게 재밌어", "수료증 받으면 이력서에 추가할 거야"] },
            { id: 65, name: "간민지", messages: ["오늘 친구랑 맛집 탐방했어", "진짜 맛있는 곳 발견했어", "다음에 또 가야겠어"] },
            { id: 66, name: "피서준", messages: ["새로운 운동화 샀어", "디자인도 좋고 편해", "신고 운동하니까 기분 좋아"] },
            { id: 67, name: "뢰지윤", messages: ["오늘 명상 앱 써봤어", "생각보다 마음이 편안해지더라", "매일 하면 좋을 것 같아"] },
            { id: 68, name: "해태양", messages: ["친구가 고민 상담해달래서 이야기 들어줬어", "내 조언이 도움이 됐으면 좋겠어", "친구가 행복했으면 해"] },
            { id: 69, name: "살다인", messages: ["오늘 미술관 다녀왔어", "작품 보면서 여러 생각 들었어", "예술에 대해 더 알고 싶어졌어"] },
            { id: 70, name: "위승호", messages: ["새로운 헤어스타일 도전했어", "파마했는데 괜찮은 것 같아", "친구들 반응이 기대돼"] },
            { id: 71, name: "조혜린", messages: ["오늘 강아지 산책 오래 했어", "날씨 좋아서 기분 좋았어", "강아지도 행복해 보여"] },
            { id: 72, name: "갑재원", messages: ["새로운 앱 개발 프로젝트 시작했어", "아이디어가 좋아서 열심히 할 거야", "출시하면 성공했으면 좋겠어"] },
            { id: 73, name: "을아영", messages: ["오늘 친구 집들이 갔어", "새 집이 정말 예쁘더라", "나도 곧 이사하고 싶어졌어"] },
            { id: 74, name: "병민석", messages: ["주말 농장 체험 다녀왔어", "직접 채소 수확하는 재미가 있어", "다음에 또 가보고 싶어"] },
            { id: 75, name: "정수연", messages: ["오늘 도서관에서 하루 종일 공부했어", "집중 잘 돼서 좋았어", "시험 잘 볼 수 있을 것 같아"] },
            { id: 76, name: "무준우", messages: ["새로운 노래 발견했어", "계속 반복해서 듣고 있어", "플레이리스트에 추가했어"] },
            { id: 77, name: "기지은", messages: ["오늘 요가 수업 처음 들었어", "생각보다 힘들었지만 좋았어", "계속 다녀볼 생각이야"] },
            { id: 78, name: "경서현", messages: ["친구가 육아 힘들다고 하소연했어", "같이 아이들 봐주기로 했어", "친구가 조금이라도 쉬었으면 좋겠어"] },
            { id: 79, name: "성태준", messages: ["오늘 회사에서 칭찬받았어!", "열심히 한 보람이 있어", "더 노력해야겠다고 다짐했어"] },
            { id: 80, name: "로다현", messages: ["새로운 레시피 도전했어", "생각보다 맛있게 나왔어", "가족들도 좋아했어"] },
            { id: 81, name: "향유진", messages: ["오늘 친구랑 카페에서 수다 떨었어", "오랜만에 만나서 할 얘기 많았어", "다음 주에 또 만나기로 했어"] },
            { id: 82, name: "려준혁", messages: ["새로운 게임 시작했어", "중독성 있어서 계속 하게 돼", "밤 늦게까지 했더니 피곤해 ㅋㅋ"] },
            { id: 83, name: "동소희", messages: ["오늘 산책하면서 생각 정리했어", "머리가 맑아지는 느낌이야", "자주 산책해야겠어"] },
            { id: 84, name: "탕재민", messages: ["새로운 외국어 공부 시작했어", "일본어 배우는 중이야", "여행 갔을 때 쓰고 싶어"] },
            { id: 85, name: "과수아", messages: ["오늘 친구 결혼식 갔어", "너무 아름다웠어", "나도 결혼하고 �명어졌어"] },
            { id: 86, name: "하민준", messages: ["새로운 취미로 베이킹 시작했어", "쿠키 만들었는데 맛있어", "다음엔 케이크 도전해볼 거야"] },
            { id: 87, name: "우예린", messages: ["오늘 전시회 다녀왔어", "작품들이 인상 깊었어", "예술에 대해 더 알고 싶어졌어"] },
            { id: 88, name: "순현서", messages: ["새로운 직장 적응 중이야", "동료들이 친절해서 다행이야", "빨리 일 배우고 싶어"] },
            { id: 89, name: "단지호", messages: ["오늘 부모님 댁에 다녀왔어", "오랜만에 가족들이랑 시간 보냈어", "자주 찾아뵈어야겠어"] },
            { id: 90, name: "양서우", messages: ["새로운 드라마 보기 시작했어", "완전 재밌어", "몰아보느라 시간 가는 줄 몰랐어"] },
            { id: 91, name: "복아인", messages: ["오늘 친구랑 영화 봤어", "액션 영화였는데 완전 짜릿했어", "속편 나오면 또 보고 싶어"] },
            { id: 92, name: "온지안", messages: ["새로운 습관 들이기 도전 중이야", "물 많이 마시기", "건강해지는 느낌이야"] },
            { id: 93, name: "황태현", messages: ["오늘 회사 야유회 갔어", "팀원들이랑 더 친해진 것 같아", "다음에 또 가면 좋겠어"] },
            { id: 94, name: "전수민", messages: ["새로운 악세서리 샀어", "디자인이 예뻐", "매일 착용하고 다니고 있어"] },
            { id: 95, name: "잠민서", messages: ["오늘 자전거 타고 한강 다녀왔어", "바람 쐬니까 기분 전환 됐어", "자주 가야겠어"] },
            { id: 96, name: "곽지훈", messages: ["새로운 취미 시작했어", "목공예 배우는 중이야", "만드는 재미가 있어"] },
            { id: 97, name: "신예은", messages: ["오늘 친구 생일 선물 샀어", "마음에 들어할 것 같아", "생일 파티가 기대돼"] },
            { id: 98, name: "곽준호", messages: ["새로운 운동 시작했어", "필라테스 배우는 중이야", "자세 교정에 좋은 것 같아"] },
            { id: 99, name: "양서연", messages: ["오늘 가족들이랑 외식했어", "맛있는 음식 먹고 대화 나누니 좋았어", "자주 모여야겠어"] },
            { id: 100, name: "남하준", messages: ["새로운 목표 세웠어", "1년 안에 자격증 3개 따기", "열심히 공부해야지"] }
        ];

        let currentTest = 0;
        let results = [];
        let isRunning = false;
        let totalTime = 0;

        function simulateSummaryAPI(userMessages) {
            // 실제 AI API를 시뮬레이션
            return new Promise((resolve) => {
                const processingTime = Math.random() * 1000 + 1500; // 1.5-2.5초

                setTimeout(() => {
                    // 사용자 메시지만 합치기
                    const combined = userMessages.join(' ');

                    // detailed summary 생성 (100자 이내)
                    const detailed = `나는 ${combined.substring(0, 90)}...`;

                    // compact summary 생성 (30자 이내)
                    const keywords = combined.match(/[\uAC00-\uD7A3]+/g) || [];
                    const compact = keywords.slice(0, 3).join(', ').substring(0, 30);

                    resolve({
                        success: true,
                        detailed: detailed.substring(0, 100),
                        compact: compact || "키워드 추출 실패",
                        processingTime: processingTime
                    });
                }, processingTime);
            });
        }

        async function runSingleTest(testCase) {
            const startTime = Date.now();

            try {
                const result = await simulateSummaryAPI(testCase.messages);
                const endTime = Date.now();
                const duration = (endTime - startTime) / 1000;

                return {
                    id: testCase.id,
                    name: testCase.name,
                    userInput: testCase.messages.join(' '),
                    detailed: result.detailed,
                    compact: result.compact,
                    success: result.detailed.length <= 100 && result.compact.length <= 30,
                    duration: duration,
                    detailedLength: result.detailed.length,
                    compactLength: result.compact.length
                };
            } catch (error) {
                return {
                    id: testCase.id,
                    name: testCase.name,
                    userInput: testCase.messages.join(' '),
                    success: false,
                    error: error.message,
                    duration: 0
                };
            }
        }

        async function startTest() {
            if (isRunning) return;

            isRunning = true;
            currentTest = 0;
            results = [];
            totalTime = 0;

            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('resultList').innerHTML = '';

            for (let i = 0; i < testData.length && isRunning; i++) {
                currentTest = i + 1;
                updateProgress();

                const result = await runSingleTest(testData[i]);
                results.push(result);
                totalTime += result.duration;

                updateStats();
                displayResult(result);
            }

            if (isRunning) {
                isRunning = false;
                document.getElementById('startBtn').disabled = false;
                document.getElementById('stopBtn').disabled = true;
                alert('테스트 완료!');
            }
        }

        function stopTest() {
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
        }

        function clearResults() {
            results = [];
            currentTest = 0;
            totalTime = 0;
            updateProgress();
            updateStats();
            document.getElementById('resultList').innerHTML = '<p style="color: #666; text-align: center;">테스트를 시작하면 결과가 여기에 표시됩니다.</p>';
        }

        function updateProgress() {
            const percent = (currentTest / testData.length) * 100;
            const fill = document.getElementById('progressFill');
            fill.style.width = percent + '%';
            fill.textContent = `${currentTest}/${testData.length}`;
        }

        function updateStats() {
            const successCount = results.filter(r => r.success).length;
            const failCount = results.filter(r => !r.success).length;
            const avgTime = results.length > 0 ? (totalTime / results.length).toFixed(2) : 0;

            document.getElementById('completedCount').textContent = results.length;
            document.getElementById('successCount').textContent = successCount;
            document.getElementById('failCount').textContent = failCount;
            document.getElementById('avgTime').textContent = avgTime + 's';
        }

        function displayResult(result) {
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-case';

            resultDiv.innerHTML = `
                <div class="test-header">
                    <span class="test-id">Test #${result.id}: ${result.name}</span>
                    <span class="test-status ${result.success ? 'status-success' : 'status-fail'}">
                        ${result.success ? '✓ 성공' : '✗ 실패'}
                    </span>
                </div>

                <div class="user-input">
                    <strong>사용자 입력:</strong> ${result.userInput}
                </div>

                ${result.success ? `
                    <div class="summaries">
                        <div class="summary-box detailed-summary">
                            <div class="summary-label">📝 Detailed Summary (100자)</div>
                            <div class="summary-text">${result.detailed}</div>
                            <div class="summary-meta">${result.detailedLength}/100자 • ${result.duration.toFixed(2)}s</div>
                        </div>

                        <div class="summary-box compact-summary">
                            <div class="summary-label">🔖 Compact Summary (30자)</div>
                            <div class="summary-text">${result.compact}</div>
                            <div class="summary-meta">${result.compactLength}/30자</div>
                        </div>
                    </div>
                ` : `
                    <div class="error-message">
                        <strong>오류:</strong> ${result.error || '요약 생성 실패'}
                    </div>
                `}
            `;

            const resultList = document.getElementById('resultList');
            if (resultList.firstChild && resultList.firstChild.tagName === 'P') {
                resultList.innerHTML = '';
            }
            resultList.insertBefore(resultDiv, resultList.firstChild);
        }
    </script>
</body>
</html>
